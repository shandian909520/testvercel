(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-payment-payment"],{2182:function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return n}));var n={uniIcons:a("bab4").default},i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{},[a("v-uni-view",{staticClass:"body"},[a("v-uni-view",{staticClass:"zi-four font-one center"},[t._v("订单还需支付：")]),a("v-uni-view",{staticClass:"font-two center"},[t._v("￥"+t._s(t.price))])],1),a("v-uni-view",{staticClass:"body"},[a("v-uni-view",{staticClass:"zi-one"},[t._v("支付方式")]),1==t.wx_pay_status?a("v-uni-view",{staticClass:"flex side wx",attrs:{"data-payment":"weixin"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.payments.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"flex vertical"},[a("uni-icons",{attrs:{"custom-prefix":"iconfont",type:"icon-weixinzhifu",size:"20",color:"#36E352"}}),a("v-uni-view",{staticClass:"name"},[t._v("微信")])],1),"weixin"==t.payment?a("uni-icons",{attrs:{type:"checkbox-filled",size:"24",color:"#36E352"}}):a("uni-icons",{attrs:{type:"circle",size:"24",color:"#707070"}})],1):t._e(),t.code_status?a("v-uni-view",{staticClass:"code",attrs:{"data-payment":"code"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.payments.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"flex side "},[a("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.code_s,expression:"code_s"}],staticClass:"flex vertical"},[a("uni-icons",{attrs:{"custom-prefix":"iconfont",type:"icon-jihuoma",size:"22",color:"#123DC7"}}),a("v-uni-view",{staticClass:"name"},[t._v("激活码")])],1),"code"==t.payment?a("uni-icons",{attrs:{type:"checkbox-filled",size:"24",color:"#36E352"}}):a("uni-icons",{attrs:{type:"circle",size:"24",color:"#707070"}})],1),"weixin"!=t.payment?a("v-uni-input",{staticClass:"zi-two",attrs:{type:"text",value:"",placeholder:"请输入激活码"},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}}):t._e()],1):t._e()],1),a("v-uni-view",{staticClass:"body bodymTop"},[a("v-uni-button",{attrs:{type:"default"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submit.apply(void 0,arguments)}}},[t._v(t._s("weixin"==t.payment?"立即支付":"立即兑换"))])],1)],1)},o=[]},3007:function(t,e,a){var n=a("24fb");e=n(!1),e.push([t.i,'@font-face{font-family:iconfont; /* Project id 3248340 */src:url(/static/iconfont.ttf) format("truetype")}.iconfont[data-v-38c9a58e]{font-family:iconfont!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-baocuntupianzhonggaoban[data-v-38c9a58e]:before{content:"\\e674"}.icon-riqi[data-v-38c9a58e]:before{content:"\\e629"}.icon-shangchuantupian1[data-v-38c9a58e]:before{content:"\\e68d"}.icon-jihuoma[data-v-38c9a58e]:before{content:"\\e639"}.icon-weixinzhifu[data-v-38c9a58e]:before{content:"\\e618"}.icon-weizhifu[data-v-38c9a58e]:before{content:"\\e6f2"}.icon-yiwancheng[data-v-38c9a58e]:before{content:"\\e60f"}.icon-shalou1[data-v-38c9a58e]:before{content:"\\e632"}.icon-shangchuan[data-v-38c9a58e]:before{content:"\\e631"}.icon-kefu[data-v-38c9a58e]:before{content:"\\e608"}.icon-24gl-circle[data-v-38c9a58e]:before{content:"\\ea97"}.icon-shalou[data-v-38c9a58e]:before{content:"\\e605"}uni-page-body[data-v-38c9a58e]{background-color:#fff}uni-image[data-v-38c9a58e]{width:%?40?%;margin-right:%?12?%}uni-input[data-v-38c9a58e]{border:%?1?% solid #acc0ff;border-radius:%?10?%;margin-top:%?38?%;height:%?70?%;padding-left:%?20?%}.name[data-v-38c9a58e]{margin-left:%?10?%}.background[data-v-38c9a58e]{background-color:#123dc7}.body[data-v-38c9a58e]{width:%?678?%;margin:auto}.wx[data-v-38c9a58e],\n.code[data-v-38c9a58e]{border-bottom:%?1?% solid #d2d2d2;padding:%?40?% 0}.bodymTop[data-v-38c9a58e]{margin-top:%?184?%}.font-two[data-v-38c9a58e]{font-size:%?72?%;padding-top:%?39?%;margin-bottom:%?94?%}.font-one[data-v-38c9a58e]{padding-top:%?100?%}.zi-one[data-v-38c9a58e]{color:#515473}uni-button[data-v-38c9a58e]{border-radius:%?43?%;\n\t/* height: 86rpx; */background-color:#123dc7!important;color:#fff!important}body.?%PAGE?%[data-v-38c9a58e]{background-color:#fff}',""]),t.exports=e},"33f7":function(t,e,a){"use strict";var n=a("46b5"),i=a.n(n);i.a},4027:function(t,e,a){"use strict";a("c975"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a("b8ce");function i(){var t=window.location.href,e=t.indexOf("code");if(-1===e)getApp().request("POST","/api/mp_info",{},{url:t,pf_id:getApp().globalData.platform}).then((function(t){n.config({debug:!1,appId:t.data.appId,nonceStr:t.data.nonceStr,timestamp:t.data.timestamp,signature:t.data.signature,jsApiList:["updateAppMessageShareData","updateTimelineShareData","getLocalImgData","chooseImage","uploadImage"],openTagList:["wx-open-launch-weapp"]}),n.ready((function(){var t=uni.getStorageSync("image"),e=uni.getStorageSync("title"),a=uni.getStorageSync("msg"),i=uni.getStorageSync("ma");n.updateAppMessageShareData({title:e,desc:a,link:getApp().globalData.url+"/H5/#/?invite_code="+i,imgUrl:getApp().globalData.url+t,success:function(){},fail:function(){}}),n.updateTimelineShareData({title:e,link:getApp().globalData.url+"/H5/#/?invite_code="+i,imgUrl:getApp().globalData.url+t,success:function(){},fail:function(){}})})),n.error((function(t){console.log(t)}))}));else{var a=t.indexOf("#");t=t.substring(a,t.length);var i=t.indexOf("?");-1==i||(t=t.substring(0,i)),t=getApp().globalData.url+"/H5/"+t,window.location.href=t}}var o={WXConfig:i};e.default=o},"46b5":function(t,e,a){var n=a("3007");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("4f06").default;i("bc762f24",n,!0,{sourceMap:!1,shadowMode:!1})},"662b":function(t,e,a){"use strict";a.r(e);var n=a("2182"),i=a("b7d7");for(var o in i)"default"!==o&&function(t){a.d(e,t,(function(){return i[t]}))}(o);a("33f7");var c,s=a("f0c5"),r=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,"38c9a58e",null,!1,n["a"],c);e["default"]=r.exports},"8ae1":function(t,e,a){"use strict";var n=a("4ea4");a("c975"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(a("4027")),o={data:function(){return{order_id:"",price:"",code_s:!0,payment:"weixin",code:"",url:"",urls:"",provider:"",title:"",iamge:"",invite_code:"",code_status:!1,wx_pay_status:0}},methods:{payments:function(t){"weixin"==t.currentTarget.dataset.payment?this.url=this.urls+"/wx_pay":this.url=this.urls+"/code_pay",this.payment=t.currentTarget.dataset.payment},shu:function(t,e){getApp().request("POST",this.url,{token:getApp().globalData.token},t).then((function(t){if(console.log(t),uni.hideLoading(),0==t.code)return uni.showToast({title:t.message,icon:"none",duration:2e3}),!1;if(2==e)uni.showToast({title:t.message,icon:"none",duration:2e3}),setTimeout((function(){uni.navigateTo({url:"../Indent/Indent?type=0"})}),2e3);else{var n=a("b8ce"),i=window.location.href;getApp().request("POST","/api/mp_info",{},{url:i,pf_id:getApp().globalData.platform}).then((function(e){n.config({debug:!1,appId:e.data.appId,timestamp:e.data.timeStamp,nonceStr:e.data.nonceStr,signature:e.data.signature,jsApiList:["chooseWXPay"]}),n.ready((function(){n.checkJsApi({jsApiList:["chooseWXPay"],success:function(t){console.log("pay",t)}}),n.chooseWXPay({appId:e.data.appId,timestamp:t.data.timeStamp,nonceStr:t.data.nonceStr,package:t.data.package,signType:t.data.signType,paySign:t.data.paySign,success:function(t){uni.showToast({title:"支付成功",duration:2e3,icon:"none"}),setTimeout((function(){uni.redirectTo({url:"../Indent/Indent?type=0"})}),2e3)},fail:function(t){uni.showToast({title:"支付失败",duration:2e3,icon:"none"})}})})),n.error((function(t){console.log("error",t)}))}))}})).catch((function(t){console.log(t,1111)}))},submit:function(){var t={};if(!this.code_status&&0==this.wx_pay_status)return uni.showModal({title:"提示",content:"未设置支付方式,请联系客服"}),!1;if("weixin"==this.payment)t={order_id:this.order_id},uni.showLoading({title:"支付中"}),this.shu(t,1);else{if(""==this.code)return uni.showModal({title:"提示",content:"请输入激活码"}),!1;t={order_id:this.order_id,code:this.code},uni.showLoading({title:"支付中"}),this.shu(t,2)}}},onLoad:function(t){var e=this;1==t.classify?(this.urls="/api/incoming",this.url="/api/incoming/wx_pay",this.order_id=t.order_id,this.price=t.price):(this.urls="/api",this.url="/api/wx_pay",getApp().request("POST","/api/get_order_price",{token:getApp().globalData.token},{order_id:t.order_id}).then((function(a){e.price=a.data.price,e.order_id=t.order_id}))),uni.getProvider({service:"payment",success:function(t){e.provider=t.provider[0]},fail:function(t){console.log(t),uni.showToast({title:"未知错误，请联系管理员",icon:"none",duration:2e3})}}),getApp().request("POST","/api/code_status",{},{pf_id:getApp().globalData.platform}).then((function(t){e.code_status=t.data.code_status})),getApp().request("POST","/api/index/wx_pay_status",{},{pf_id:getApp().globalData.platform}).then((function(t){e.wx_pay_status=t.data,0==t.data&&(e.url=e.urls+"/code_pay",e.payment="code")})),i.default.WXConfig(this);var a=uni.getStorageSync("image");-1==a.indexOf("https")&&(this.iamge=getApp().url_htt(a))}};e.default=o},b7d7:function(t,e,a){"use strict";a.r(e);var n=a("8ae1"),i=a.n(n);for(var o in n)"default"!==o&&function(t){a.d(e,t,(function(){return n[t]}))}(o);e["default"]=i.a}}]);