(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-payment-payment"],{"1b34":function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return i}));var i={uniIcons:a("8c7f").default},n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{},[a("v-uni-view",{staticClass:"body"},[a("v-uni-view",{staticClass:"zi-four font-one center"},[t._v("订单还需支付：")]),a("v-uni-view",{staticClass:"font-two center"},[t._v("￥"+t._s(t.price))])],1),a("v-uni-view",{staticClass:"body"},[a("v-uni-view",{staticClass:"zi-one"},[t._v("支付方式")]),1==t.wx_pay_status?a("v-uni-view",{staticClass:"flex side wx",attrs:{"data-payment":"weixin"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.payments.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"flex vertical"},[a("uni-icons",{attrs:{"custom-prefix":"iconfont",type:"icon-weixinzhifu",size:"20",color:"#36E352"}}),a("v-uni-view",{staticClass:"name"},[t._v("微信")])],1),"weixin"==t.payment?a("uni-icons",{attrs:{type:"checkbox-filled",size:"24",color:"#36E352"}}):a("uni-icons",{attrs:{type:"circle",size:"24",color:"#707070"}})],1):t._e(),t.code_status?a("v-uni-view",{staticClass:"code",attrs:{"data-payment":"code"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.payments.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"flex side "},[a("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.code_s,expression:"code_s"}],staticClass:"flex vertical"},[a("uni-icons",{attrs:{"custom-prefix":"iconfont",type:"icon-jihuoma",size:"22",color:"#123DC7"}}),a("v-uni-view",{staticClass:"name"},[t._v("激活码")])],1),"code"==t.payment?a("uni-icons",{attrs:{type:"checkbox-filled",size:"24",color:"#36E352"}}):a("uni-icons",{attrs:{type:"circle",size:"24",color:"#707070"}})],1),"weixin"!=t.payment?a("v-uni-input",{staticClass:"zi-two",attrs:{type:"text",value:"",placeholder:"请输入激活码"},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}}):t._e()],1):t._e()],1),a("v-uni-view",{staticClass:"body bodymTop"},[a("v-uni-button",{attrs:{type:"default"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submit.apply(void 0,arguments)}}},[t._v(t._s("weixin"==t.payment?"立即支付":"立即兑换"))])],1)],1)},o=[]},"39c2":function(t,e,a){"use strict";(function(t){a("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("c975");var i=a("964c");var n={WXConfig:function(){var e=window.location.href,a=e.indexOf("code");if(-1===a)getApp().request("POST","/api/mp_info",{},{url:e,pf_id:getApp().globalData.platform}).then((function(e){i.config({debug:!1,appId:e.data.appId,nonceStr:e.data.nonceStr,timestamp:e.data.timestamp,signature:e.data.signature,jsApiList:["updateAppMessageShareData","updateTimelineShareData","getLocalImgData","chooseImage","uploadImage"],openTagList:["wx-open-launch-weapp"]}),i.ready((function(){var e=uni.getStorageSync("image"),a=uni.getStorageSync("title"),n=uni.getStorageSync("msg"),o=uni.getStorageSync("ma");i.updateAppMessageShareData({title:a,desc:n,link:getApp().globalData.url+"/H5/#/?invite_code="+o+"&pf_id="+getApp().globalData.platform,imgUrl:getApp().globalData.url+e,success:function(e){t("log",e," at pages/weixinModule.js:41")},fail:function(e){t("log",e," at pages/weixinModule.js:44")}}),i.updateTimelineShareData({title:a,link:getApp().globalData.url+"/H5/#/?invite_code="+o+"&pf_id="+getApp().globalData.platform,imgUrl:getApp().globalData.url+e,success:function(e){t("log",e," at pages/weixinModule.js:54")},fail:function(e){t("log",e," at pages/weixinModule.js:57")}})})),i.error((function(e){t("log",e," at pages/weixinModule.js:63")}))}));else{var n=e.indexOf("#");e=e.substring(n,e.length);var o=e.indexOf("?");-1==o||(e=e.substring(0,o)),e=getApp().globalData.url+"/H5/"+e,window.location.href=e}}};e.default=n}).call(this,a("0de9")["log"])},6372:function(t,e,a){"use strict";a.r(e);var i=a("1b34"),n=a("89a7");for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);a("d270");var s=a("f0c5"),r=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,"63787200",null,!1,i["a"],void 0);e["default"]=r.exports},"89a7":function(t,e,a){"use strict";a.r(e);var i=a("ed5e"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);e["default"]=n.a},bf77:function(t,e,a){var i=a("d912");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("4f06").default;n("80201e76",i,!0,{sourceMap:!1,shadowMode:!1})},d270:function(t,e,a){"use strict";var i=a("bf77"),n=a.n(i);n.a},d912:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,'@font-face{font-family:iconfont; /* Project id 3248340 */src:url(/static/iconfont.ttf) format("truetype")}\r\n/* // 版权信息：晓江云计算有限公司\r\n\t// 官方网址：www.xiaojiangy.com\r\n\t// 本系统未经授权严禁使用，盗版必究。\r\n\t// 通过技术手段盗版本系统或者通过其他非商业渠道获取到项目代码的请联系官方人员购买正版授权。 */.iconfont[data-v-63787200]{font-family:iconfont!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-baocuntupianzhonggaoban[data-v-63787200]:before{content:"\\e674"}.icon-riqi[data-v-63787200]:before{content:"\\e629"}.icon-shangchuantupian1[data-v-63787200]:before{content:"\\e68d"}.icon-jihuoma[data-v-63787200]:before{content:"\\e639"}.icon-weixinzhifu[data-v-63787200]:before{content:"\\e618"}.icon-weizhifu[data-v-63787200]:before{content:"\\e6f2"}.icon-yiwancheng[data-v-63787200]:before{content:"\\e60f"}.icon-shalou1[data-v-63787200]:before{content:"\\e632"}.icon-shangchuan[data-v-63787200]:before{content:"\\e631"}.icon-kefu[data-v-63787200]:before{content:"\\e608"}.icon-24gl-circle[data-v-63787200]:before{content:"\\ea97"}.icon-shalou[data-v-63787200]:before{content:"\\e605"}uni-page-body[data-v-63787200]{background-color:#fff}body.?%PAGE?%[data-v-63787200]{background-color:#fff}uni-image[data-v-63787200]{width:%?40?%;margin-right:%?12?%}uni-input[data-v-63787200]{border:%?1?% solid #acc0ff;border-radius:%?10?%;margin-top:%?38?%;height:%?70?%;padding-left:%?20?%}.name[data-v-63787200]{margin-left:%?10?%}.background[data-v-63787200]{background-color:#123dc7}.body[data-v-63787200]{width:%?678?%;margin:auto}.wx[data-v-63787200],\r\n.code[data-v-63787200]{border-bottom:%?1?% solid #d2d2d2;padding:%?40?% 0}.bodymTop[data-v-63787200]{margin-top:%?184?%}.font-two[data-v-63787200]{font-size:%?72?%;padding-top:%?39?%;margin-bottom:%?94?%}.font-one[data-v-63787200]{padding-top:%?100?%}.zi-one[data-v-63787200]{color:#515473}uni-button[data-v-63787200]{border-radius:%?43?%;\r\n\t/* height: 86rpx; */background-color:#123dc7!important;color:#fff!important}',""]),t.exports=e},ed5e:function(t,e,a){"use strict";(function(t){a("7a82");var i=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("c975");var n=i(a("39c2")),o={data:function(){return{order_id:"",price:"",code_s:!0,payment:"weixin",code:"",url:"",urls:"",provider:"",title:"",iamge:"",invite_code:"",code_status:!1,wx_pay_status:0}},methods:{payments:function(t){"weixin"==t.currentTarget.dataset.payment?this.url=this.urls+"/wx_pay":this.url=this.urls+"/code_pay",this.payment=t.currentTarget.dataset.payment},shu:function(e,i){getApp().request("POST",this.url,{token:getApp().globalData.token},e).then((function(e){if(t("log",e," at pages/payment/payment.vue:85"),uni.hideLoading(),0==e.code)return uni.showToast({title:e.message,icon:"none",duration:2e3}),!1;if(2==i)uni.showToast({title:"兑换成功",icon:"none",duration:2e3}),setTimeout((function(){uni.reLaunch({url:"../Indent/Indent?type=0&pf_id="+getApp().globalData.platform})}),2e3);else{var n=a("964c"),o=window.location.href;getApp().request("POST","/api/mp_info",{},{url:o,pf_id:getApp().globalData.platform}).then((function(a){n.config({debug:!1,appId:a.data.appId,timestamp:a.data.timeStamp,nonceStr:a.data.nonceStr,signature:a.data.signature,jsApiList:["chooseWXPay"]}),n.ready((function(){n.checkJsApi({jsApiList:["chooseWXPay"],success:function(e){t("log","pay",e," at pages/payment/payment.vue:161")}}),n.chooseWXPay({appId:a.data.appId,timestamp:e.data.timeStamp,nonceStr:e.data.nonceStr,package:e.data.package,signType:e.data.signType,paySign:e.data.paySign,success:function(t){uni.showToast({title:"支付成功",duration:2e3,icon:"none"}),setTimeout((function(){uni.reLaunch({url:"../Indent/Indent?type=0&pf_id="+getApp().globalData.platform})}),2e3)},fail:function(t){uni.showToast({title:"支付失败",duration:2e3,icon:"none"})}})})),n.error((function(e){t("log","error",e," at pages/payment/payment.vue:197")}))}))}})).catch((function(e){t("log",e,1111," at pages/payment/payment.vue:204")}))},submit:function(){var t={};if(!this.code_status&&0==this.wx_pay_status)return uni.showModal({title:"提示",content:"未设置支付方式,请联系客服"}),!1;if("weixin"==this.payment)t={order_id:this.order_id},uni.showLoading({title:"支付中"}),this.shu(t,1);else{if(""==this.code)return uni.showModal({title:"提示",content:"请输入激活码"}),!1;t={order_id:this.order_id,code:this.code},uni.showLoading({title:"支付中"}),this.shu(t,2)}}},onLoad:function(e){var a=this;1==e.classify?(this.urls="/api/incoming",this.url="/api/incoming/wx_pay",this.order_id=e.order_id,this.price=e.price):2==e.classify?(this.urls="/api/alipay",this.url="/api/alipay/wx_pay",this.order_id=e.order_id,this.price=e.price):(this.urls="/api",this.url="/api/wx_pay",getApp().request("POST","/api/get_order_price",{token:getApp().globalData.token},{order_id:e.order_id}).then((function(t){a.price=t.data.price,a.order_id=e.order_id}))),uni.getProvider({service:"payment",success:function(t){a.provider=t.provider[0]},fail:function(e){t("log",e," at pages/payment/payment.vue:273"),uni.showToast({title:"未知错误，请联系管理员",icon:"none",duration:2e3})}}),getApp().request("POST","/api/code_status",{},{pf_id:getApp().globalData.platform}).then((function(t){a.code_status=t.data.code_status})),getApp().request("POST","/api/index/wx_pay_status",{},{pf_id:getApp().globalData.platform}).then((function(t){a.wx_pay_status=t.data,0==t.data&&(a.url=a.urls+"/code_pay",a.payment="code")})),n.default.WXConfig(this);var i=uni.getStorageSync("image");-1==i.indexOf("https")&&(this.iamge=getApp().url_htt(i))}};e.default=o}).call(this,a("0de9")["log"])}}]);