(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-payment-payment"],{1091:function(t,a,e){"use strict";e.d(a,"b",(function(){return i})),e.d(a,"c",(function(){return o})),e.d(a,"a",(function(){return n}));var n={uniIcons:e("2a8b").default},i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-uni-view",{},[e("v-uni-view",{staticClass:"body"},[e("v-uni-view",{staticClass:"zi-four font-one center"},[t._v("订单还需支付：")]),e("v-uni-view",{staticClass:"font-two center"},[t._v("￥"+t._s(t.price))])],1),e("v-uni-view",{staticClass:"body"},[e("v-uni-view",{staticClass:"zi-one"},[t._v("支付方式")]),e("v-uni-view",{staticClass:"flex side wx",attrs:{"data-payment":"weixin"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.payments.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"flex vertical"},[e("uni-icons",{attrs:{"custom-prefix":"iconfont",type:"icon-weixinzhifu",size:"20",color:"#36E352"}}),e("v-uni-view",{staticClass:"name"},[t._v("微信")])],1),"weixin"==t.payment?e("uni-icons",{attrs:{type:"checkbox-filled",size:"24",color:"#36E352"}}):e("uni-icons",{attrs:{type:"circle",size:"24",color:"#707070"}})],1),e("v-uni-view",{staticClass:"code",attrs:{"data-payment":"code"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.payments.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"flex side "},[e("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.code_s,expression:"code_s"}],staticClass:"flex vertical"},[e("uni-icons",{attrs:{"custom-prefix":"iconfont",type:"icon-jihuoma",size:"22",color:"#123DC7"}}),e("v-uni-view",{staticClass:"name"},[t._v("激活码")])],1),"code"==t.payment?e("uni-icons",{attrs:{type:"checkbox-filled",size:"24",color:"#36E352"}}):e("uni-icons",{attrs:{type:"circle",size:"24",color:"#707070"}})],1),"weixin"!=t.payment?e("v-uni-input",{staticClass:"zi-two",attrs:{type:"text",value:"",placeholder:"请输入激活码"},model:{value:t.code,callback:function(a){t.code=a},expression:"code"}}):t._e()],1)],1),e("v-uni-view",{staticClass:"body"},[e("v-uni-button",{attrs:{type:"default"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.submit.apply(void 0,arguments)}}},[t._v(t._s("weixin"==t.payment?"立即支付":"立即兑换"))])],1)],1)},o=[]},"2f3b":function(t,a,e){"use strict";e.r(a);var n=e("1091"),i=e("3bb8");for(var o in i)"default"!==o&&function(t){e.d(a,t,(function(){return i[t]}))}(o);e("43cd");var d,c=e("f0c5"),r=Object(c["a"])(i["default"],n["b"],n["c"],!1,null,"5d0badad",null,!1,n["a"],d);a["default"]=r.exports},"3bb8":function(t,a,e){"use strict";e.r(a);var n=e("47dd"),i=e.n(n);for(var o in n)"default"!==o&&function(t){e.d(a,t,(function(){return n[t]}))}(o);a["default"]=i.a},"43cd":function(t,a,e){"use strict";var n=e("a8fd"),i=e.n(n);i.a},"47dd":function(t,a,e){"use strict";var n=e("4ea4");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i=n(e("c4ad")),o={data:function(){return{order_id:"",price:"",code_s:!0,payment:"weixin",code:"",url:"",provider:"",title:"",iamge:"",invite_code:""}},methods:{payments:function(t){this.payment=t.currentTarget.dataset.payment},shu:function(t,a){getApp().request("POST",this.url,{token:getApp().globalData.token},t).then((function(t){if(2==a)uni.showToast({title:t.message,icon:"none",duration:2e3}),setTimeout((function(){uni.navigateTo({url:"../Indent/Indent"})}),2e3);else{var n=e("d2eb"),i=window.location.href;getApp().request("POST","/api/mp_info",{},{url:i}).then((function(a){console.log("res1",t),n.config({debug:!1,appId:a.data.appId,timestamp:a.data.timeStamp,nonceStr:a.data.nonceStr,signature:a.data.signature,jsApiList:["chooseWXPay"]}),n.ready((function(){n.checkJsApi({jsApiList:["chooseWXPay"],success:function(t){console.log("pay",t)}}),n.chooseWXPay({appId:a.data.appId,timestamp:t.data.timeStamp,nonceStr:t.data.nonceStr,package:t.data.package,signType:t.data.signType,paySign:t.data.paySign,success:function(t){uni.showToast({title:"支付成功",duration:2e3,icon:"none"}),setTimeout((function(){uni.navigateTo({url:"../Indent/Indent"})}),2e3)},fail:function(t){console.log("res3",t),uni.showToast({title:"支付失败",duration:2e3,icon:"none"})}})})),n.error((function(t){console.log("error",t)}))}))}}))},submit:function(){var t={};"weixin"==this.payment?(this.url=this.url+"/wx_pay",t={order_id:this.order_id,type:2},this.shu(t,1)):(this.url=this.url+"/code_pay",t={order_id:this.order_id,code:this.code,type:2},this.shu(t,2))}},onLoad:function(t){var a=this;t.classify?(this.url="/api/incoming",this.order_id=t.order_id,this.price=t.price):(this.url="/api",getApp().request("POST","/api/get_order_price",{token:getApp().globalData.token},{order_id:t.order_id}).then((function(e){a.price=e.data.price,a.order_id=t.order_id}))),uni.getProvider({service:"payment",success:function(t){a.provider=t.provider[0]},fail:function(){uni.showToast({title:"未知错误，请联系管理员",icon:"none",duration:2e3})}}),i.default.WXConfig(this)}};a.default=o},"6ca7":function(t,a,e){var n=e("24fb");a=n(!1),a.push([t.i,'@font-face{font-family:iconfont; /* Project id 3248340 */src:url(/static/iconfont.ttf) format("truetype")}.iconfont[data-v-5d0badad]{font-family:iconfont!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-baocuntupianzhonggaoban[data-v-5d0badad]:before{content:"\\e674"}.icon-riqi[data-v-5d0badad]:before{content:"\\e629"}.icon-shangchuantupian1[data-v-5d0badad]:before{content:"\\e68d"}.icon-jihuoma[data-v-5d0badad]:before{content:"\\e639"}.icon-weixinzhifu[data-v-5d0badad]:before{content:"\\e618"}.icon-weizhifu[data-v-5d0badad]:before{content:"\\e6f2"}.icon-yiwancheng[data-v-5d0badad]:before{content:"\\e60f"}.icon-shalou1[data-v-5d0badad]:before{content:"\\e632"}.icon-shangchuan[data-v-5d0badad]:before{content:"\\e631"}.icon-kefu[data-v-5d0badad]:before{content:"\\e608"}.icon-24gl-circle[data-v-5d0badad]:before{content:"\\ea97"}.icon-shalou[data-v-5d0badad]:before{content:"\\e605"}uni-page-body[data-v-5d0badad]{background-color:#fff}uni-image[data-v-5d0badad]{width:%?40?%;margin-right:%?12?%}uni-input[data-v-5d0badad]{border:%?1?% solid #acc0ff;border-radius:%?10?%;margin-top:%?38?%;height:%?70?%;padding-left:%?20?%}.name[data-v-5d0badad]{margin-left:%?10?%}.background[data-v-5d0badad]{background-color:#123dc7}.body[data-v-5d0badad]{width:%?678?%;margin:auto}.wx[data-v-5d0badad],\n.code[data-v-5d0badad]{border-bottom:%?1?% solid #d2d2d2;padding:%?40?% 0}.code[data-v-5d0badad]{margin-bottom:%?184?%}.font-two[data-v-5d0badad]{font-size:%?72?%;padding-top:%?39?%;margin-bottom:%?94?%}.font-one[data-v-5d0badad]{padding-top:%?100?%}.zi-one[data-v-5d0badad]{color:#515473}uni-button[data-v-5d0badad]{border-radius:%?43?%;height:%?86?%;background-color:#123dc7!important;color:#fff!important}body.?%PAGE?%[data-v-5d0badad]{background-color:#fff}',""]),t.exports=a},a8fd:function(t,a,e){var n=e("6ca7");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=e("4f06").default;i("5020eb6b",n,!0,{sourceMap:!1,shadowMode:!1})}}]);