(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-payment-payment"],{"11f5":function(e,t,n){var a=n("c8ad");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var i=n("4f06").default;i("751435ba",a,!0,{sourceMap:!1,shadowMode:!1})},"2f3b":function(e,t,n){"use strict";n.r(t);var a=n("e8d5"),i=n("3bb8");for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);n("e0d5");var c,r=n("f0c5"),s=Object(r["a"])(i["default"],a["b"],a["c"],!1,null,"443a09fe",null,!1,a["a"],c);t["default"]=s.exports},"3bb8":function(e,t,n){"use strict";n.r(t);var a=n("47dd"),i=n.n(a);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);t["default"]=i.a},"47dd":function(e,t,n){"use strict";var a=n("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n("c4ad")),o={data:function(){return{order_id:"",price:"",code_s:!0,payment:"weixin",code:"",url:"",provider:"",title:"",iamge:"",invite_code:""}},methods:{payments:function(e){this.payment=e.currentTarget.dataset.payment},shu:function(e,t){getApp().request("POST",this.url,{token:getApp().globalData.token},e).then((function(e){if(2==t)uni.showToast({title:e.message,icon:"none",duration:2e3}),setTimeout((function(){uni.navigateTo({url:"../Indent/Indent"})}),2e3);else{var a=n("d2eb"),i=window.location.href;getApp().request("POST","/api/mp_info",{},{url:i}).then((function(t){console.log("res1",e),a.config({debug:!1,appId:t.data.appId,timestamp:t.data.timeStamp,nonceStr:t.data.nonceStr,signature:t.data.signature,jsApiList:["chooseWXPay"]}),a.ready((function(){a.checkJsApi({jsApiList:["chooseWXPay"],success:function(e){console.log("pay",e)}}),a.chooseWXPay({appId:t.data.appId,timestamp:e.data.timeStamp,nonceStr:e.data.nonceStr,package:e.data.package,signType:e.data.signType,paySign:e.data.paySign,success:function(e){uni.showToast({title:"支付成功",duration:2e3,icon:"none"}),setTimeout((function(){uni.navigateTo({url:"../Indent/Indent"})}),2e3)},fail:function(e){console.log("res3",e),uni.showToast({title:"支付失败",duration:2e3,icon:"none"})}})})),a.error((function(e){console.log("error",e)}))}))}}))},submit:function(){var e={};"weixin"==this.payment?(this.url=this.url+"/wx_pay",e={order_id:this.order_id,type:2},this.shu(e,1)):(this.url=this.url+"/code_pay",e={order_id:this.order_id,code:this.code,type:2},this.shu(e,2))}},onLoad:function(e){var t=this;e.classify?(this.url="/api/incoming",this.order_id=e.order_id,this.price=e.price):(this.url="/api",getApp().request("POST","/api/get_order_price",{token:getApp().globalData.token},{order_id:e.order_id}).then((function(n){t.price=n.data.price,t.order_id=e.order_id}))),uni.getProvider({service:"payment",success:function(e){t.provider=e.provider[0]},fail:function(){uni.showToast({title:"未知错误，请联系管理员",icon:"none",duration:2e3})}}),i.default.WXConfig(this)}};t.default=o},c8ad:function(e,t,n){var a=n("24fb");t=a(!1),t.push([e.i,'@font-face{font-family:iconfont; /* Project id 3248340 */src:url(/static/iconfont.ttf) format("truetype")}.iconfont[data-v-443a09fe]{font-family:iconfont!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-baocuntupianzhonggaoban[data-v-443a09fe]:before{content:"\\e674"}.icon-riqi[data-v-443a09fe]:before{content:"\\e629"}.icon-shangchuantupian1[data-v-443a09fe]:before{content:"\\e68d"}.icon-jihuoma[data-v-443a09fe]:before{content:"\\e639"}.icon-weixinzhifu[data-v-443a09fe]:before{content:"\\e618"}.icon-weizhifu[data-v-443a09fe]:before{content:"\\e6f2"}.icon-yiwancheng[data-v-443a09fe]:before{content:"\\e60f"}.icon-shalou1[data-v-443a09fe]:before{content:"\\e632"}.icon-shangchuan[data-v-443a09fe]:before{content:"\\e631"}.icon-kefu[data-v-443a09fe]:before{content:"\\e608"}.icon-24gl-circle[data-v-443a09fe]:before{content:"\\ea97"}.icon-shalou[data-v-443a09fe]:before{content:"\\e605"}uni-page-body[data-v-443a09fe]{background-color:#fff}uni-image[data-v-443a09fe]{width:%?40?%;margin-right:%?12?%}uni-input[data-v-443a09fe]{border:%?1?% solid #acc0ff;border-radius:%?10?%;margin-top:%?38?%;height:%?70?%;padding-left:%?20?%}.name[data-v-443a09fe]{margin-left:%?10?%}.background[data-v-443a09fe]{background-color:#123dc7}.body[data-v-443a09fe]{width:%?678?%;margin:auto}.wx[data-v-443a09fe],\n.code[data-v-443a09fe]{border-bottom:%?1?% solid #d2d2d2;padding:%?40?% 0}.code[data-v-443a09fe]{margin-bottom:%?184?%}.font-two[data-v-443a09fe]{font-size:%?72?%;padding-top:%?39?%;margin-bottom:%?94?%}.font-one[data-v-443a09fe]{padding-top:%?100?%}.zi-one[data-v-443a09fe]{color:#515473}uni-button[data-v-443a09fe]{border-radius:%?43?%;height:%?86?%;background-color:#123dc7!important;color:#fff!important}body.?%PAGE?%[data-v-443a09fe]{background-color:#fff}',""]),e.exports=t},e0d5:function(e,t,n){"use strict";var a=n("11f5"),i=n.n(a);i.a},e8d5:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return a}));var a={uniIcons:n("2a8b").default},i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{},[n("v-uni-view",{staticClass:"body"},[n("v-uni-view",{staticClass:"zi-four font-one center"},[e._v("订单还需支付：")]),n("v-uni-view",{staticClass:"font-two center"},[e._v("￥"+e._s(e.price))])],1),n("v-uni-view",{staticClass:"body"},[n("v-uni-view",{staticClass:"zi-one"},[e._v("支付方式")]),n("v-uni-view",{staticClass:"flex side wx",attrs:{"data-payment":"weixin"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.payments.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"flex vertical"},[n("uni-icons",{attrs:{"custom-prefix":"iconfont",type:"icon-weixinzhifu",size:"20",color:"#36E352"}}),n("v-uni-view",{staticClass:"name"},[e._v("微信")])],1),"weixin"==e.payment?n("uni-icons",{attrs:{type:"checkbox-filled",size:"24",color:"#36E352"}}):n("uni-icons",{attrs:{type:"circle",size:"24",color:"#707070"}})],1),n("v-uni-view",{staticClass:"code",attrs:{"data-payment":"code"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.payments.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"flex side "},[n("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:e.code_s,expression:"code_s"}],staticClass:"flex vertical"},[n("uni-icons",{attrs:{"custom-prefix":"iconfont",type:"icon-jihuoma",size:"22",color:"#123DC7"}}),n("v-uni-view",{staticClass:"name"},[e._v("激活码")])],1),"code"==e.payment?n("uni-icons",{attrs:{type:"checkbox-filled",size:"24",color:"#36E352"}}):n("uni-icons",{attrs:{type:"circle",size:"24",color:"#707070"}})],1),"weixin"!=e.payment?n("v-uni-input",{staticClass:"zi-two",attrs:{type:"text",value:"",placeholder:"请输入激活码"},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}}):e._e()],1)],1),n("v-uni-view",{staticClass:"body"},[n("v-uni-button",{attrs:{type:"default"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.submit.apply(void 0,arguments)}}},[e._v(e._s("weixin"==e.payment?"立即支付":"立即兑换"))])],1)],1)},o=[]}}]);